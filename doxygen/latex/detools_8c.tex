\doxysection{/home/harrkout/github/\+Leshan-\/\+OMA-\/\+Lightweight-\/\+M2\+M-\/server-\/for-\/\+Zephyr-\//src/detools/detools.c File Reference}
\hypertarget{detools_8c}{}\label{detools_8c}\index{/home/harrkout/github/Leshan-\/OMA-\/Lightweight-\/M2M-\/server-\/for-\/Zephyr-\//src/detools/detools.c@{/home/harrkout/github/Leshan-\/OMA-\/Lightweight-\/M2M-\/server-\/for-\/Zephyr-\//src/detools/detools.c}}
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include "{}detools.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{detools_8c_a1a8d84b343963239e571bf4b131e748a}{PATCH\+\_\+\+TYPE\+\_\+\+SEQUENTIAL}}~0
\item 
\#define \mbox{\hyperlink{detools_8c_ab9331a7f36f2d041d36cf5298f6df9fc}{COMPRESSION\+\_\+\+HEATSHRINK}}~4
\item 
\#define \mbox{\hyperlink{detools_8c_a74e75242132eaabbc1c512488a135926}{MIN}}(x,  y)~(((x) $<$ (y)) ? (x) \+: (y))
\item 
\#define \mbox{\hyperlink{detools_8c_aacc3ee1a7f283f8ef65cea31f4436a95}{MAX}}(x,  y)~(((x) $>$ (y)) ? (x) \+: (y))
\item 
\#define \mbox{\hyperlink{detools_8c_a99f9f739933d3e43cbfd20fbb10a206e}{DIV\+\_\+\+CEIL}}(n,  d)~(((n) + (d) -\/ 1) / (d))
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{detools_8c_a58541d3601074bf788715e45c6cfa76b}{detools\+\_\+apply\+\_\+patch\+\_\+init}} (struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}self\+\_\+p, \mbox{\hyperlink{detools_8h_a8b97625390f27bb7fc49f0f605c66cd6}{detools\+\_\+read\+\_\+t}} from\+\_\+read, \mbox{\hyperlink{detools_8h_afb7e1686bf7230c0c386384634de6cb8}{detools\+\_\+seek\+\_\+t}} from\+\_\+seek, size\+\_\+t patch\+\_\+size, \mbox{\hyperlink{detools_8h_af6bfc7f5a429bdf65d48033371e40d29}{detools\+\_\+write\+\_\+t}} to\+\_\+write, void \texorpdfstring{$\ast$}{*}arg\+\_\+p)
\item 
int \mbox{\hyperlink{detools_8c_a8e62d963e43114286677dce42a3a14bd}{detools\+\_\+apply\+\_\+patch\+\_\+dump}} (struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}self\+\_\+p, \mbox{\hyperlink{detools_8h_aec69afb8accb8a34449131ea565a656e}{detools\+\_\+state\+\_\+write\+\_\+t}} state\+\_\+write)
\item 
int \mbox{\hyperlink{detools_8c_acd81f873e3ce7c0046838ddad4a64209}{detools\+\_\+apply\+\_\+patch\+\_\+restore}} (struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}self\+\_\+p, \mbox{\hyperlink{detools_8h_a5775816edd7227d3a60ab12fa652f84d}{detools\+\_\+state\+\_\+read\+\_\+t}} state\+\_\+read)
\item 
size\+\_\+t \mbox{\hyperlink{detools_8c_acb60d3536b16772c28d0bf238b531f50}{detools\+\_\+apply\+\_\+patch\+\_\+get\+\_\+patch\+\_\+offset}} (struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}self\+\_\+p)
\item 
size\+\_\+t \mbox{\hyperlink{detools_8c_a93e918f10650d62e3c42494595dfad85}{detools\+\_\+apply\+\_\+patch\+\_\+get\+\_\+to\+\_\+offset}} (struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}self\+\_\+p)
\item 
int \mbox{\hyperlink{detools_8c_aec1c882a1d0f7560b7ed0d175062fa95}{detools\+\_\+apply\+\_\+patch\+\_\+process}} (struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}self\+\_\+p, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}patch\+\_\+p, size\+\_\+t size)
\item 
int \mbox{\hyperlink{detools_8c_ad2dc568462b3761d183b5544724d28cc}{detools\+\_\+apply\+\_\+patch\+\_\+finalize}} (struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}self\+\_\+p)
\item 
int \mbox{\hyperlink{detools_8c_a3cafd9bf54d88dee4a2715d4ec3871a2}{detools\+\_\+apply\+\_\+patch\+\_\+callbacks}} (\mbox{\hyperlink{detools_8h_a8b97625390f27bb7fc49f0f605c66cd6}{detools\+\_\+read\+\_\+t}} from\+\_\+read, \mbox{\hyperlink{detools_8h_afb7e1686bf7230c0c386384634de6cb8}{detools\+\_\+seek\+\_\+t}} from\+\_\+seek, \mbox{\hyperlink{detools_8h_a8b97625390f27bb7fc49f0f605c66cd6}{detools\+\_\+read\+\_\+t}} patch\+\_\+read, size\+\_\+t patch\+\_\+size, \mbox{\hyperlink{detools_8h_af6bfc7f5a429bdf65d48033371e40d29}{detools\+\_\+write\+\_\+t}} to\+\_\+write, void \texorpdfstring{$\ast$}{*}arg\+\_\+p)
\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{detools_8c_ab744d2b15ec7495834d002c89fd88e14}{detools\+\_\+error\+\_\+as\+\_\+string}} (int error)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{detools_8c_ab9331a7f36f2d041d36cf5298f6df9fc}\label{detools_8c_ab9331a7f36f2d041d36cf5298f6df9fc} 
\index{detools.c@{detools.c}!COMPRESSION\_HEATSHRINK@{COMPRESSION\_HEATSHRINK}}
\index{COMPRESSION\_HEATSHRINK@{COMPRESSION\_HEATSHRINK}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{COMPRESSION\_HEATSHRINK}{COMPRESSION\_HEATSHRINK}}
{\footnotesize\ttfamily \#define COMPRESSION\+\_\+\+HEATSHRINK~4}



Definition at line \mbox{\hyperlink{detools_8c_source_l00040}{40}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.

\Hypertarget{detools_8c_a99f9f739933d3e43cbfd20fbb10a206e}\label{detools_8c_a99f9f739933d3e43cbfd20fbb10a206e} 
\index{detools.c@{detools.c}!DIV\_CEIL@{DIV\_CEIL}}
\index{DIV\_CEIL@{DIV\_CEIL}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{DIV\_CEIL}{DIV\_CEIL}}
{\footnotesize\ttfamily \#define DIV\+\_\+\+CEIL(\begin{DoxyParamCaption}\item[{}]{n,  }\item[{}]{d }\end{DoxyParamCaption})~(((n) + (d) -\/ 1) / (d))}



Definition at line \mbox{\hyperlink{detools_8c_source_l00044}{44}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.

\Hypertarget{detools_8c_aacc3ee1a7f283f8ef65cea31f4436a95}\label{detools_8c_aacc3ee1a7f283f8ef65cea31f4436a95} 
\index{detools.c@{detools.c}!MAX@{MAX}}
\index{MAX@{MAX}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{MAX}{MAX}}
{\footnotesize\ttfamily \#define MAX(\begin{DoxyParamCaption}\item[{}]{x,  }\item[{}]{y }\end{DoxyParamCaption})~(((x) $>$ (y)) ? (x) \+: (y))}



Definition at line \mbox{\hyperlink{detools_8c_source_l00043}{43}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.

\Hypertarget{detools_8c_a74e75242132eaabbc1c512488a135926}\label{detools_8c_a74e75242132eaabbc1c512488a135926} 
\index{detools.c@{detools.c}!MIN@{MIN}}
\index{MIN@{MIN}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{MIN}{MIN}}
{\footnotesize\ttfamily \#define MIN(\begin{DoxyParamCaption}\item[{}]{x,  }\item[{}]{y }\end{DoxyParamCaption})~(((x) $<$ (y)) ? (x) \+: (y))}



Definition at line \mbox{\hyperlink{detools_8c_source_l00042}{42}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.

\Hypertarget{detools_8c_a1a8d84b343963239e571bf4b131e748a}\label{detools_8c_a1a8d84b343963239e571bf4b131e748a} 
\index{detools.c@{detools.c}!PATCH\_TYPE\_SEQUENTIAL@{PATCH\_TYPE\_SEQUENTIAL}}
\index{PATCH\_TYPE\_SEQUENTIAL@{PATCH\_TYPE\_SEQUENTIAL}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{PATCH\_TYPE\_SEQUENTIAL}{PATCH\_TYPE\_SEQUENTIAL}}
{\footnotesize\ttfamily \#define PATCH\+\_\+\+TYPE\+\_\+\+SEQUENTIAL~0}

BSD 2-\/Clause License

Copyright (c) 2019-\/2020, Erik Moqvist All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\+:


\begin{DoxyItemize}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\end{DoxyItemize}

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "{}\+AS IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 

Definition at line \mbox{\hyperlink{detools_8c_source_l00037}{37}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{detools_8c_a3cafd9bf54d88dee4a2715d4ec3871a2}\label{detools_8c_a3cafd9bf54d88dee4a2715d4ec3871a2} 
\index{detools.c@{detools.c}!detools\_apply\_patch\_callbacks@{detools\_apply\_patch\_callbacks}}
\index{detools\_apply\_patch\_callbacks@{detools\_apply\_patch\_callbacks}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_apply\_patch\_callbacks()}{detools\_apply\_patch\_callbacks()}}
{\footnotesize\ttfamily int detools\+\_\+apply\+\_\+patch\+\_\+callbacks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{detools_8h_a8b97625390f27bb7fc49f0f605c66cd6}{detools\+\_\+read\+\_\+t}}}]{from\+\_\+read,  }\item[{\mbox{\hyperlink{detools_8h_afb7e1686bf7230c0c386384634de6cb8}{detools\+\_\+seek\+\_\+t}}}]{from\+\_\+seek,  }\item[{\mbox{\hyperlink{detools_8h_a8b97625390f27bb7fc49f0f605c66cd6}{detools\+\_\+read\+\_\+t}}}]{patch\+\_\+read,  }\item[{size\+\_\+t}]{patch\+\_\+size,  }\item[{\mbox{\hyperlink{detools_8h_af6bfc7f5a429bdf65d48033371e40d29}{detools\+\_\+write\+\_\+t}}}]{to\+\_\+write,  }\item[{void \texorpdfstring{$\ast$}{*}}]{arg\+\_\+p }\end{DoxyParamCaption})}

Apply given patch using read, write and seek callbacks.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em from\+\_\+read} & Source read callback. \\
\hline
\mbox{\texttt{ in}}  & {\em from\+\_\+seek} & Source seek callback. \\
\hline
\mbox{\texttt{ in}}  & {\em patch\+\_\+read} & Patch read callback. \\
\hline
\mbox{\texttt{ in}}  & {\em patch\+\_\+size} & Patch size in bytes. \\
\hline
\mbox{\texttt{ in}}  & {\em to\+\_\+write} & Destination write callback. \\
\hline
\mbox{\texttt{ in}}  & {\em arg\+\_\+p} & Argument passed to all callbacks.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Size of to-\/data in bytes or negative error code. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00969}{969}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00975\ \{}
\DoxyCodeLine{00976\ \ \ \ \ \textcolor{keywordtype}{int}\ res;}
\DoxyCodeLine{00977\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdetools__apply__patch__t}{detools\_apply\_patch\_t}}\ apply\_patch;}
\DoxyCodeLine{00978\ }
\DoxyCodeLine{00979\ \ \ \ \ res\ =\ \mbox{\hyperlink{detools_8c_a58541d3601074bf788715e45c6cfa76b}{detools\_apply\_patch\_init}}(\&apply\_patch,}
\DoxyCodeLine{00980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdetools__apply__patch__t_ac64704d5abbe0b95b4cc00f6e9ebf1e9}{from\_read}},}
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdetools__apply__patch__t_a235c1dcc103643da09d050761359b6e5}{from\_seek}},}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdetools__apply__patch__t_afff09990064c0df97a2ca5f1bd052c03}{patch\_size}},}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdetools__apply__patch__t_ae6bfa16e2fb1147db97ff4c43ffd82f1}{to\_write}},}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdetools__apply__patch__t_a58dd76ecdacf460ef3603318db606a36}{arg\_p}});}
\DoxyCodeLine{00985\ }
\DoxyCodeLine{00986\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ !=\ 0)\ \{}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (res);}
\DoxyCodeLine{00988\ \ \ \ \ \}}
\DoxyCodeLine{00989\ }
\DoxyCodeLine{00990\ \ \ \ \ \textcolor{keywordflow}{return}\ (callbacks\_process(\&apply\_patch,\ patch\_read,\ \mbox{\hyperlink{structdetools__apply__patch__t_afff09990064c0df97a2ca5f1bd052c03}{patch\_size}},\ \mbox{\hyperlink{structdetools__apply__patch__t_a58dd76ecdacf460ef3603318db606a36}{arg\_p}}));}
\DoxyCodeLine{00991\ \}}

\end{DoxyCode}
\Hypertarget{detools_8c_a8e62d963e43114286677dce42a3a14bd}\label{detools_8c_a8e62d963e43114286677dce42a3a14bd} 
\index{detools.c@{detools.c}!detools\_apply\_patch\_dump@{detools\_apply\_patch\_dump}}
\index{detools\_apply\_patch\_dump@{detools\_apply\_patch\_dump}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_apply\_patch\_dump()}{detools\_apply\_patch\_dump()}}
{\footnotesize\ttfamily int detools\+\_\+apply\+\_\+patch\+\_\+dump (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{self\+\_\+p,  }\item[{\mbox{\hyperlink{detools_8h_aec69afb8accb8a34449131ea565a656e}{detools\+\_\+state\+\_\+write\+\_\+t}}}]{state\+\_\+write }\end{DoxyParamCaption})}

Dump given apply patch object state. Call {\ttfamily \doxylink{detools_8h_acd81f873e3ce7c0046838ddad4a64209}{detools\+\_\+apply\+\_\+patch\+\_\+restore()}} to restore an apply patch object to the dumped state.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em self\+\_\+p} & Apply patch object to dump. \\
\hline
\mbox{\texttt{ in}}  & {\em write} & Write callback.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
zero(0) or negative error code. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00775}{775}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00777\ \{}
\DoxyCodeLine{00778\ \ \ \ \ \textcolor{keywordtype}{int}\ res;}
\DoxyCodeLine{00779\ }
\DoxyCodeLine{00780\ \ \ \ \ res\ =\ state\_write(self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a58dd76ecdacf460ef3603318db606a36}{arg\_p}},\ self\_p,\ \textcolor{keyword}{sizeof}(*self\_p));}
\DoxyCodeLine{00781\ }
\DoxyCodeLine{00782\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ !=\ 0)\ \{}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \textcolor{comment}{//printk("{}-\/-\/-\/-\/IO4-\/-\/-\/\(\backslash\)n"{});}}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (-\/\mbox{\hyperlink{detools_8h_a485a54c496b3a23eba73135fba34dcf9}{DETOOLS\_IO\_FAILED}});}
\DoxyCodeLine{00785\ \ \ \ \ \}}
\DoxyCodeLine{00786\ }
\DoxyCodeLine{00787\ \ \ \ \ \textcolor{keywordflow}{if}\ (self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a24c397d83b33b8b5a1afef031f6fe48a}{state}}\ ==\ \mbox{\hyperlink{detools_8h_a5069102d39ee8fd370d2a59a06298126a92695700295444b680b585071639cff9}{detools\_apply\_patch\_state\_init\_t}})\ \{}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (0);}
\DoxyCodeLine{00789\ \ \ \ \ \}}
\DoxyCodeLine{00790\ }
\DoxyCodeLine{00791\ \ \ \ \ \textcolor{keywordflow}{return}\ (patch\_reader\_dump(\&self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_acd794b75c715ccf77dd0b465fdf070f1}{patch\_reader}},}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a08ab33a48474b8c74426c82413bde98e}{compression}},}
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ state\_write));}
\DoxyCodeLine{00794\ \}}

\end{DoxyCode}
\Hypertarget{detools_8c_ad2dc568462b3761d183b5544724d28cc}\label{detools_8c_ad2dc568462b3761d183b5544724d28cc} 
\index{detools.c@{detools.c}!detools\_apply\_patch\_finalize@{detools\_apply\_patch\_finalize}}
\index{detools\_apply\_patch\_finalize@{detools\_apply\_patch\_finalize}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_apply\_patch\_finalize()}{detools\_apply\_patch\_finalize()}}
{\footnotesize\ttfamily int detools\+\_\+apply\+\_\+patch\+\_\+finalize (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{self\+\_\+p }\end{DoxyParamCaption})}

Call once after all data has been processed to finalize the patching. The value returned from this function should be ignored if an error occurred in \doxylink{detools_8h_aec1c882a1d0f7560b7ed0d175062fa95}{detools\+\_\+apply\+\_\+patch\+\_\+process()}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em self\+\_\+p} & Initialized apply patch object.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Size of to-\/data in bytes if the patch was applied successfully, or negative error code. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00893}{893}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00894\ \{}
\DoxyCodeLine{00895\ \ \ \ \ \textcolor{keywordtype}{int}\ res;}
\DoxyCodeLine{00896\ }
\DoxyCodeLine{00897\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a6ad7868db95f141895ea6cc77db49a55}{chunk}}.size\ =\ 0;}
\DoxyCodeLine{00898\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a6ad7868db95f141895ea6cc77db49a55}{chunk}}.offset\ =\ 0;}
\DoxyCodeLine{00899\ }
\DoxyCodeLine{00900\ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ res\ =\ apply\_patch\_process\_once(self\_p);}
\DoxyCodeLine{00902\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (res\ ==\ 0);}
\DoxyCodeLine{00903\ }
\DoxyCodeLine{00904\ \ \ \ \ \textcolor{keywordflow}{return}\ (apply\_patch\_common\_finalize(res,}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_acd794b75c715ccf77dd0b465fdf070f1}{patch\_reader}},}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a0df81c9c8ed68f5ad7270becbecaef33}{to\_size}}));}
\DoxyCodeLine{00907\ \}}

\end{DoxyCode}
\Hypertarget{detools_8c_acb60d3536b16772c28d0bf238b531f50}\label{detools_8c_acb60d3536b16772c28d0bf238b531f50} 
\index{detools.c@{detools.c}!detools\_apply\_patch\_get\_patch\_offset@{detools\_apply\_patch\_get\_patch\_offset}}
\index{detools\_apply\_patch\_get\_patch\_offset@{detools\_apply\_patch\_get\_patch\_offset}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_apply\_patch\_get\_patch\_offset()}{detools\_apply\_patch\_get\_patch\_offset()}}
{\footnotesize\ttfamily size\+\_\+t detools\+\_\+apply\+\_\+patch\+\_\+get\+\_\+patch\+\_\+offset (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{self\+\_\+p }\end{DoxyParamCaption})}

Get the current patch stream offset. Often used to restore the patch stream after restore.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em self\+\_\+p} & Apply patch object.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The current patch stream offset. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00837}{837}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00838\ \{}
\DoxyCodeLine{00839\ \ \ \ \ \textcolor{keywordflow}{return}\ (self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a5c294172e9416b732ff42a3e0f84d6f0}{patch\_offset}});}
\DoxyCodeLine{00840\ \ \ \ \ \textcolor{comment}{//printk("{}self\_p-\/>patch\_offset\ 0x\%08x\ \(\backslash\)n"{},\ self\_p-\/>patch\_offset);}}
\DoxyCodeLine{00841\ }
\DoxyCodeLine{00842\ \}}

\end{DoxyCode}
\Hypertarget{detools_8c_a93e918f10650d62e3c42494595dfad85}\label{detools_8c_a93e918f10650d62e3c42494595dfad85} 
\index{detools.c@{detools.c}!detools\_apply\_patch\_get\_to\_offset@{detools\_apply\_patch\_get\_to\_offset}}
\index{detools\_apply\_patch\_get\_to\_offset@{detools\_apply\_patch\_get\_to\_offset}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_apply\_patch\_get\_to\_offset()}{detools\_apply\_patch\_get\_to\_offset()}}
{\footnotesize\ttfamily size\+\_\+t detools\+\_\+apply\+\_\+patch\+\_\+get\+\_\+to\+\_\+offset (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{self\+\_\+p }\end{DoxyParamCaption})}

Get the current to stream offset. Often used to restore the to stream after restore.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em self\+\_\+p} & Apply patch object.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The current to stream offset. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00844}{844}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00845\ \{}
\DoxyCodeLine{00846\ \ \ \ \ \textcolor{keywordflow}{return}\ (self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a1f3f626b01afb6c10fbf19d2f4b1bbcd}{to\_offset}});}
\DoxyCodeLine{00847\ \ \ \ \ \textcolor{comment}{//printk("{}self\_p-\/>to\_offset\ 0x\%08x\ \(\backslash\)n"{},\ self\_p-\/>to\_offset);}}
\DoxyCodeLine{00848\ }
\DoxyCodeLine{00849\ \}}

\end{DoxyCode}
\Hypertarget{detools_8c_a58541d3601074bf788715e45c6cfa76b}\label{detools_8c_a58541d3601074bf788715e45c6cfa76b} 
\index{detools.c@{detools.c}!detools\_apply\_patch\_init@{detools\_apply\_patch\_init}}
\index{detools\_apply\_patch\_init@{detools\_apply\_patch\_init}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_apply\_patch\_init()}{detools\_apply\_patch\_init()}}
{\footnotesize\ttfamily int detools\+\_\+apply\+\_\+patch\+\_\+init (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{self\+\_\+p,  }\item[{\mbox{\hyperlink{detools_8h_a8b97625390f27bb7fc49f0f605c66cd6}{detools\+\_\+read\+\_\+t}}}]{from\+\_\+read,  }\item[{\mbox{\hyperlink{detools_8h_afb7e1686bf7230c0c386384634de6cb8}{detools\+\_\+seek\+\_\+t}}}]{from\+\_\+seek,  }\item[{size\+\_\+t}]{patch\+\_\+size,  }\item[{\mbox{\hyperlink{detools_8h_af6bfc7f5a429bdf65d48033371e40d29}{detools\+\_\+write\+\_\+t}}}]{to\+\_\+write,  }\item[{void \texorpdfstring{$\ast$}{*}}]{arg\+\_\+p }\end{DoxyParamCaption})}

Initialize given apply patch object.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em self\+\_\+p} & Apply patch object to initialize. \\
\hline
\mbox{\texttt{ in}}  & {\em from\+\_\+read} & Callback to read from-\/data. \\
\hline
\mbox{\texttt{ in}}  & {\em from\+\_\+seek} & Callback to seek from current position in from-\/data. \\
\hline
\mbox{\texttt{ in}}  & {\em patch\+\_\+size} & Patch size in bytes. Not used if {\ttfamily \doxylink{detools_8h_acd81f873e3ce7c0046838ddad4a64209}{detools\+\_\+apply\+\_\+patch\+\_\+restore()}} is called immediately after this function. \\
\hline
\mbox{\texttt{ in}}  & {\em to\+\_\+write} & Destination callback. \\
\hline
\mbox{\texttt{ in}}  & {\em arg\+\_\+p} & Argument passed to the callbacks.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
zero(0) or negative error code. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00755}{755}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00761\ \{}
\DoxyCodeLine{00762\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_ac64704d5abbe0b95b4cc00f6e9ebf1e9}{from\_read}}\ =\ from\_read;}
\DoxyCodeLine{00763\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a235c1dcc103643da09d050761359b6e5}{from\_seek}}\ =\ from\_seek;}
\DoxyCodeLine{00764\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_afff09990064c0df97a2ca5f1bd052c03}{patch\_size}}\ =\ patch\_size;}
\DoxyCodeLine{00765\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a5c294172e9416b732ff42a3e0f84d6f0}{patch\_offset}}\ =\ 0;}
\DoxyCodeLine{00766\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_ae6bfa16e2fb1147db97ff4c43ffd82f1}{to\_write}}\ =\ to\_write;}
\DoxyCodeLine{00767\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_af332dba741c0fba5cd844aa24f9eb5e1}{from\_offset}}\ =\ 0;}
\DoxyCodeLine{00768\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a58dd76ecdacf460ef3603318db606a36}{arg\_p}}\ =\ arg\_p;}
\DoxyCodeLine{00769\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a24c397d83b33b8b5a1afef031f6fe48a}{state}}\ =\ \mbox{\hyperlink{detools_8h_a5069102d39ee8fd370d2a59a06298126a92695700295444b680b585071639cff9}{detools\_apply\_patch\_state\_init\_t}};}
\DoxyCodeLine{00770\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_acd794b75c715ccf77dd0b465fdf070f1}{patch\_reader}}.destroy\ =\ NULL;}
\DoxyCodeLine{00771\ }
\DoxyCodeLine{00772\ \ \ \ \ \textcolor{keywordflow}{return}\ (0);}
\DoxyCodeLine{00773\ \}}

\end{DoxyCode}
\Hypertarget{detools_8c_aec1c882a1d0f7560b7ed0d175062fa95}\label{detools_8c_aec1c882a1d0f7560b7ed0d175062fa95} 
\index{detools.c@{detools.c}!detools\_apply\_patch\_process@{detools\_apply\_patch\_process}}
\index{detools\_apply\_patch\_process@{detools\_apply\_patch\_process}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_apply\_patch\_process()}{detools\_apply\_patch\_process()}}
{\footnotesize\ttfamily int detools\+\_\+apply\+\_\+patch\+\_\+process (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{self\+\_\+p,  }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{patch\+\_\+p,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}

Call this function repeatedly until all patch data has been processed or an error occurres. Call \doxylink{detools_8h_ad2dc568462b3761d183b5544724d28cc}{detools\+\_\+apply\+\_\+patch\+\_\+finalize()} to finalize the patching, even if an error occurred.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em self\+\_\+p} & Initialized apply patch object. \\
\hline
\mbox{\texttt{ in}}  & {\em patch\+\_\+p} & Next chunk of the patch. \\
\hline
\mbox{\texttt{ in}}  & {\em size} & Patch buffer size.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
zero(0) or negative error code. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00851}{851}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00854\ \{}
\DoxyCodeLine{00855\ \ \ \ \ \textcolor{keywordtype}{int}\ res;}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \ \ \ \ \textcolor{comment}{//printk("{}\(\backslash\)n-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/Detools.c-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)r\(\backslash\)n"{});}}
\DoxyCodeLine{00858\ \ \ \ \ \textcolor{comment}{//printk("{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/7-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)r\(\backslash\)n"{});}}
\DoxyCodeLine{00861\ }
\DoxyCodeLine{00862\ }
\DoxyCodeLine{00863\ \ \ \ \ res\ =\ 0;}
\DoxyCodeLine{00864\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a5c294172e9416b732ff42a3e0f84d6f0}{patch\_offset}}\ +=\ size;}
\DoxyCodeLine{00865\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a6ad7868db95f141895ea6cc77db49a55}{chunk}}.buf\_p\ =\ patch\_p;}
\DoxyCodeLine{00866\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a6ad7868db95f141895ea6cc77db49a55}{chunk}}.size\ =\ size;}
\DoxyCodeLine{00867\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a6ad7868db95f141895ea6cc77db49a55}{chunk}}.offset\ =\ 0;}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ \ \ \textcolor{comment}{//printk("{}\(\backslash\)nself\_p-\/>patch\_offset\ 0x\%08x\ \(\backslash\)n"{},\ self\_p-\/>patch\_offset);}}
\DoxyCodeLine{00870\ \ \ \ \ \textcolor{comment}{//printk("{}self\_p-\/>chunk.buf\_p\ 0x\%08x\ \(\backslash\)n"{},\ self\_p-\/>chunk.buf\_p);}}
\DoxyCodeLine{00871\ \ \ \ \ \textcolor{comment}{//printk("{}self\_p-\/>chunk.size\ 0x\%08x\ \(\backslash\)n"{},\ self\_p-\/>chunk.size);}}
\DoxyCodeLine{00872\ \ \ \ \ \textcolor{comment}{//printk("{}self\_p-\/>chunk.offset\ 0x\%08x\ \(\backslash\)n"{},\ self\_p-\/>chunk.offset);}}
\DoxyCodeLine{00873\ }
\DoxyCodeLine{00874\ }
\DoxyCodeLine{00875\ }
\DoxyCodeLine{00876\ \ \ \ \ \textcolor{keywordflow}{while}\ (chunk\_available(\&self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a6ad7868db95f141895ea6cc77db49a55}{chunk}})\ \&\&\ (res\ >=\ 0))\ \{}
\DoxyCodeLine{00879\ }
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ res\ =\ apply\_patch\_process\_once(self\_p);}
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00883\ \ \ \ \ \}}
\DoxyCodeLine{00884\ }
\DoxyCodeLine{00885\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ ==\ 1)\ \{}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ res\ =\ 0;}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \textcolor{comment}{//printk("{}\ \ \ \ if\ (res\ ==\ 1)\ \{res\ =\ 0\}:\ \%d\(\backslash\)n"{},\ res);}}
\DoxyCodeLine{00888\ \ \ \ \ \}}
\DoxyCodeLine{00889\ }
\DoxyCodeLine{00890\ \ \ \ \ \textcolor{keywordflow}{return}\ (res);}
\DoxyCodeLine{00891\ \}}

\end{DoxyCode}
\Hypertarget{detools_8c_acd81f873e3ce7c0046838ddad4a64209}\label{detools_8c_acd81f873e3ce7c0046838ddad4a64209} 
\index{detools.c@{detools.c}!detools\_apply\_patch\_restore@{detools\_apply\_patch\_restore}}
\index{detools\_apply\_patch\_restore@{detools\_apply\_patch\_restore}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_apply\_patch\_restore()}{detools\_apply\_patch\_restore()}}
{\footnotesize\ttfamily int detools\+\_\+apply\+\_\+patch\+\_\+restore (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structdetools__apply__patch__t}{detools\+\_\+apply\+\_\+patch\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{self\+\_\+p,  }\item[{\mbox{\hyperlink{detools_8h_a5775816edd7227d3a60ab12fa652f84d}{detools\+\_\+state\+\_\+read\+\_\+t}}}]{state\+\_\+read }\end{DoxyParamCaption})}

Restore given apply patch object to given dumped state.

{\ttfamily \doxylink{detools_8h_a93e918f10650d62e3c42494595dfad85}{detools\+\_\+apply\+\_\+patch\+\_\+get\+\_\+to\+\_\+offset()}} and {\ttfamily \doxylink{detools_8h_acb60d3536b16772c28d0bf238b531f50}{detools\+\_\+apply\+\_\+patch\+\_\+get\+\_\+patch\+\_\+offset()}} are often called after this function to restore the to and patch streams.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em self\+\_\+p} & Initialized apply patch object to restore. \\
\hline
\mbox{\texttt{ in}}  & {\em read} & Callback to read the dumped state.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
zero(0) or negative error code. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00796}{796}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00798\ \{}
\DoxyCodeLine{00799\ \ \ \ \ \textcolor{keywordtype}{int}\ res;}
\DoxyCodeLine{00800\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdetools__apply__patch__t}{detools\_apply\_patch\_t}}\ dumped;}
\DoxyCodeLine{00801\ \ \ \ \ }
\DoxyCodeLine{00802\ \ \ \ \ res\ =\ state\_read(self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a58dd76ecdacf460ef3603318db606a36}{arg\_p}},\ \&dumped,\ \textcolor{keyword}{sizeof}(dumped));}
\DoxyCodeLine{00803\ }
\DoxyCodeLine{00804\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ !=\ 0)\ \{}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \textcolor{comment}{//printk("{}-\/-\/-\/-\/IO5-\/-\/-\/\(\backslash\)n"{});}}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (-\/\mbox{\hyperlink{detools_8h_a485a54c496b3a23eba73135fba34dcf9}{DETOOLS\_IO\_FAILED}});}
\DoxyCodeLine{00807\ \ \ \ \ \}}
\DoxyCodeLine{00808\ }
\DoxyCodeLine{00809\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a24c397d83b33b8b5a1afef031f6fe48a}{state}}\ =\ dumped.state;}
\DoxyCodeLine{00810\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_afff09990064c0df97a2ca5f1bd052c03}{patch\_size}}\ =\ dumped.patch\_size;}
\DoxyCodeLine{00811\ }
\DoxyCodeLine{00812\ \ \ \ \ \textcolor{keywordflow}{if}\ (self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a24c397d83b33b8b5a1afef031f6fe48a}{state}}\ ==\ \mbox{\hyperlink{detools_8h_a5069102d39ee8fd370d2a59a06298126a92695700295444b680b585071639cff9}{detools\_apply\_patch\_state\_init\_t}})\ \{}
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (0);}
\DoxyCodeLine{00814\ \ \ \ \ \}}
\DoxyCodeLine{00815\ }
\DoxyCodeLine{00816\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a08ab33a48474b8c74426c82413bde98e}{compression}}\ =\ dumped.compression;}
\DoxyCodeLine{00817\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a5c294172e9416b732ff42a3e0f84d6f0}{patch\_offset}}\ =\ dumped.patch\_offset;}
\DoxyCodeLine{00818\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a1f3f626b01afb6c10fbf19d2f4b1bbcd}{to\_offset}}\ =\ dumped.to\_offset;}
\DoxyCodeLine{00819\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a0df81c9c8ed68f5ad7270becbecaef33}{to\_size}}\ =\ dumped.to\_size;}
\DoxyCodeLine{00820\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_af332dba741c0fba5cd844aa24f9eb5e1}{from\_offset}}\ =\ dumped.from\_offset;}
\DoxyCodeLine{00821\ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_ab6a7b5bae94256cdc64ddb41c06b30bb}{chunk\_size}}\ =\ dumped.chunk\_size;}
\DoxyCodeLine{00822\ }
\DoxyCodeLine{00823\ \ \ \ \ res\ =\ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a235c1dcc103643da09d050761359b6e5}{from\_seek}}(self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a58dd76ecdacf460ef3603318db606a36}{arg\_p}},\ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_af332dba741c0fba5cd844aa24f9eb5e1}{from\_offset}});}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ !=\ 0)\ \{}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \textcolor{comment}{//printk("{}-\/-\/-\/-\/IO6-\/-\/-\/\(\backslash\)n"{});}}
\DoxyCodeLine{00827\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (-\/\mbox{\hyperlink{detools_8h_a485a54c496b3a23eba73135fba34dcf9}{DETOOLS\_IO\_FAILED}});}
\DoxyCodeLine{00828\ \ \ \ \ \}}
\DoxyCodeLine{00829\ }
\DoxyCodeLine{00830\ \ \ \ \ \textcolor{keywordflow}{return}\ (patch\_reader\_restore(\&self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_acd794b75c715ccf77dd0b465fdf070f1}{patch\_reader}},}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&dumped.patch\_reader,}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a6ad7868db95f141895ea6cc77db49a55}{chunk}},}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self\_p-\/>\mbox{\hyperlink{structdetools__apply__patch__t_a08ab33a48474b8c74426c82413bde98e}{compression}},}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ state\_read));}
\DoxyCodeLine{00835\ \}}

\end{DoxyCode}
\Hypertarget{detools_8c_ab744d2b15ec7495834d002c89fd88e14}\label{detools_8c_ab744d2b15ec7495834d002c89fd88e14} 
\index{detools.c@{detools.c}!detools\_error\_as\_string@{detools\_error\_as\_string}}
\index{detools\_error\_as\_string@{detools\_error\_as\_string}!detools.c@{detools.c}}
\doxysubsubsection{\texorpdfstring{detools\_error\_as\_string()}{detools\_error\_as\_string()}}
{\footnotesize\ttfamily const char \texorpdfstring{$\ast$}{*} detools\+\_\+error\+\_\+as\+\_\+string (\begin{DoxyParamCaption}\item[{int}]{error }\end{DoxyParamCaption})}

Get the error string for given error code.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em Error} & code.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error string. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{detools_8c_source_l00993}{993}} of file \mbox{\hyperlink{detools_8c_source}{detools.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00994\ \{}
\DoxyCodeLine{00995\ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ <\ 0)\ \{}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ error\ *=\ -\/1;}
\DoxyCodeLine{00997\ \ \ \ \ \}}
\DoxyCodeLine{00998\ }
\DoxyCodeLine{00999\ \ \ \ \ \textcolor{keywordflow}{switch}\ (error)\ \{}
\DoxyCodeLine{01000\ }
\DoxyCodeLine{01001\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a5d0e918c079d45c28ab85eefb92a81c1}{DETOOLS\_NOT\_IMPLEMENTED}}:}
\DoxyCodeLine{01002\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Function\ not\ implemented."{}};}
\DoxyCodeLine{01003\ }
\DoxyCodeLine{01004\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_aefade4c9256dd7b63aa8f16a819c7989}{DETOOLS\_NOT\_DONE}}:}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Not\ done."{}};}
\DoxyCodeLine{01006\ }
\DoxyCodeLine{01007\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a1d13c42089b45f9b26af3d32c1c5dc9a}{DETOOLS\_BAD\_PATCH\_TYPE}}:}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Bad\ patch\ type."{}};}
\DoxyCodeLine{01009\ }
\DoxyCodeLine{01010\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a81164ee88a9bdc0f4caaa5118a40edb9}{DETOOLS\_BAD\_COMPRESSION}}:}
\DoxyCodeLine{01011\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Bad\ compression."{}};}
\DoxyCodeLine{01012\ }
\DoxyCodeLine{01013\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_ae2ae002ef47747380aad3efc1304cb3f}{DETOOLS\_INTERNAL\_ERROR}}:}
\DoxyCodeLine{01014\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Internal\ error."{}};}
\DoxyCodeLine{01015\ }
\DoxyCodeLine{01016\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a190d9dff65ce7c299a16b41d42c86e31}{DETOOLS\_OUT\_OF\_MEMORY}}:}
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Out\ of\ memory."{}};}
\DoxyCodeLine{01018\ }
\DoxyCodeLine{01019\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_afe981cd0696653fd6c3e0b6f3b475202}{DETOOLS\_CORRUPT\_PATCH}}:}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Corrupt\ patch."{}};}
\DoxyCodeLine{01021\ }
\DoxyCodeLine{01022\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a485a54c496b3a23eba73135fba34dcf9}{DETOOLS\_IO\_FAILED}}:}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Input/output\ failed."{}};}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01025\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_ae233c1e93381c276597aa360aee57a98}{DETOOLS\_ALREADY\_DONE}}:}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Already\ done."{}};}
\DoxyCodeLine{01027\ }
\DoxyCodeLine{01028\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a5249442fe4a06feb63a97ee3a43a044c}{DETOOLS\_SHORT\_HEADER}}:}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Short\ header."{}};}
\DoxyCodeLine{01030\ }
\DoxyCodeLine{01031\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a3259733730369ae3d31efe988225feb3}{DETOOLS\_NOT\_ENOUGH\_PATCH\_DATA}}:}
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Not\ enough\ patch\ data."{}};}
\DoxyCodeLine{01033\ }
\DoxyCodeLine{01034\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a97e21ba16efc7c10e89b87005054935c}{DETOOLS\_HEATSHRINK\_SINK}}:}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Heatshrink\ sink."{}};}
\DoxyCodeLine{01036\ }
\DoxyCodeLine{01037\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a11a0d808fa13c31c28891948f1b4b1e3}{DETOOLS\_HEATSHRINK\_POLL}}:}
\DoxyCodeLine{01038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Heatshrink\ poll."{}};}
\DoxyCodeLine{01039\ }
\DoxyCodeLine{01040\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_aeb20a110821ceb2c834b177aa3a084cd}{DETOOLS\_STEP\_SET\_FAILED}}:}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Step\ set\ failed."{}};}
\DoxyCodeLine{01042\ }
\DoxyCodeLine{01043\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_af0eb40f50306f4ec9550292f3d1e03f7}{DETOOLS\_STEP\_GET\_FAILED}}:}
\DoxyCodeLine{01044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Step\ get\ failed."{}};}
\DoxyCodeLine{01045\ }
\DoxyCodeLine{01046\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a5d60674bcfbc016e4d575bf440857726}{DETOOLS\_ALREADY\_FAILED}}:}
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Already\ failed."{}};}
\DoxyCodeLine{01048\ }
\DoxyCodeLine{01049\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_a549c0122e1b7d24712ea498502744814}{DETOOLS\_CORRUPT\_PATCH\_OVERFLOW}}:}
\DoxyCodeLine{01050\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Corrupt\ patch,\ overflow."{}};}
\DoxyCodeLine{01051\ }
\DoxyCodeLine{01052\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{detools_8h_aa9a19e178a06f38a7728ee1fee992f03}{DETOOLS\_HEATSHRINK\_HEADER}}:}
\DoxyCodeLine{01053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Heatshrink\ header."{}};}
\DoxyCodeLine{01054\ }
\DoxyCodeLine{01055\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Unknown\ error."{}};}
\DoxyCodeLine{01057\ \ \ \ \ \}}
\DoxyCodeLine{01058\ \}}

\end{DoxyCode}
