\doxysection{assemble Namespace Reference}
\hypertarget{namespaceassemble}{}\label{namespaceassemble}\index{assemble@{assemble}}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classassemble_1_1Assembly}{Assembly}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceassemble_aa936a2fe87f1c5617cabc15eb24e39aa}{same\+\_\+keys}} (a, b)
\item 
\mbox{\hyperlink{namespaceassemble_a0af4d5c10b0ba90112584d18341a6d37}{find\+\_\+board\+\_\+name}} (bootdir)
\item 
\mbox{\hyperlink{namespaceassemble_a51af30a60f9f02777c6396b8247e356f}{main}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceassemble_af289670e250b19806a45fb2cb94f233e}{offset\+\_\+re}} = re.\+compile(r"{}\texorpdfstring{$^\wedge$}{\string^}\#define DT\+\_\+\+FLASH\+\_\+\+AREA\+\_\+(\mbox{[}0-\/9A-\/Z\+\_\+\mbox{]}+)\+\_\+\+OFFSET(\+\_\+0)?\textbackslash{}s+(0x\mbox{[}0-\/9a-\/fA-\/F\mbox{]}+\texorpdfstring{$\vert$}{|}\mbox{[}0-\/9\mbox{]}+)\$"{})
\item 
\mbox{\hyperlink{namespaceassemble_a13d7ce74f896baf0c65793c8bb96fd09}{size\+\_\+re}} = re.\+compile(r"{}\texorpdfstring{$^\wedge$}{\string^}\#define DT\+\_\+\+FLASH\+\_\+\+AREA\+\_\+(\mbox{[}0-\/9A-\/Z\+\_\+\mbox{]}+)\+\_\+\+SIZE(\+\_\+0)?\textbackslash{}s+(0x\mbox{[}0-\/9a-\/fA-\/F\mbox{]}+\texorpdfstring{$\vert$}{|}\mbox{[}0-\/9\mbox{]}+)\$"{})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}Assemble multiple images into a single image that can be flashed on the device.
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\Hypertarget{namespaceassemble_a0af4d5c10b0ba90112584d18341a6d37}\label{namespaceassemble_a0af4d5c10b0ba90112584d18341a6d37} 
\index{assemble@{assemble}!find\_board\_name@{find\_board\_name}}
\index{find\_board\_name@{find\_board\_name}!assemble@{assemble}}
\doxysubsubsection{\texorpdfstring{find\_board\_name()}{find\_board\_name()}}
{\footnotesize\ttfamily find\+\_\+board\+\_\+name (\begin{DoxyParamCaption}\item[{}]{bootdir }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{assemble_8py_source_l00098}{98}} of file \mbox{\hyperlink{assemble_8py_source}{assemble.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00098\ \textcolor{keyword}{def\ }find\_board\_name(bootdir):}
\DoxyCodeLine{00099\ \ \ \ \ dot\_config\ =\ os.path.join(bootdir,\ \textcolor{stringliteral}{"{}zephyr"{}},\ \textcolor{stringliteral}{"{}.config"{}})}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keyword}{with}\ open(dot\_config,\ \textcolor{stringliteral}{"{}r"{}})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ f:}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ line.startswith(\textcolor{stringliteral}{"{}CONFIG\_BOARD="{}}):}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ line.split(\textcolor{stringliteral}{"{}="{}},\ 1)[1].strip(\textcolor{stringliteral}{'"{}'})}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{raise}\ Exception(\textcolor{stringliteral}{"{}Expected\ CONFIG\_BOARD\ line\ in\ \{\}"{}}.format(dot\_config))}
\DoxyCodeLine{00105\ }

\end{DoxyCode}
\Hypertarget{namespaceassemble_a51af30a60f9f02777c6396b8247e356f}\label{namespaceassemble_a51af30a60f9f02777c6396b8247e356f} 
\index{assemble@{assemble}!main@{main}}
\index{main@{main}!assemble@{assemble}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{assemble_8py_source_l00106}{106}} of file \mbox{\hyperlink{assemble_8py_source}{assemble.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00106\ \textcolor{keyword}{def\ }\mbox{\hyperlink{lwm2m-client_8c_a6288eba0f8e8ad3ab1544ad731eb7667}{main}}():}
\DoxyCodeLine{00107\ \ \ \ \ parser\ =\ argparse.ArgumentParser()}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/b'},\ \textcolor{stringliteral}{'-\/-\/bootdir'},\ required=\textcolor{keyword}{True},}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{'Directory\ of\ built\ bootloader'})}
\DoxyCodeLine{00111\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/p'},\ \textcolor{stringliteral}{'-\/-\/primary'},\ required=\textcolor{keyword}{True},}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{'Signed\ image\ file\ for\ primary\ image'})}
\DoxyCodeLine{00113\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/s'},\ \textcolor{stringliteral}{'-\/-\/secondary'},}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{'Signed\ image\ file\ for\ secondary\ image'})}
\DoxyCodeLine{00115\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/o'},\ \textcolor{stringliteral}{'-\/-\/output'},\ required=\textcolor{keyword}{True},}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{'Filename\ to\ write\ full\ image\ to'})}
\DoxyCodeLine{00117\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{'-\/z'},\ \textcolor{stringliteral}{'-\/-\/zephyr-\/base'},}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ help=\textcolor{stringliteral}{'Zephyr\ base\ containing\ the\ Zephyr\ repository'})}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ args\ =\ parser.parse\_args()}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ zephyr\_base\ =\ args.zephyr\_base}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordflow}{if}\ zephyr\_base\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ zephyr\_base\ =\ os.environ[\textcolor{stringliteral}{'ZEPHYR\_BASE'}]}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ KeyError:}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{'Need\ to\ either\ have\ ZEPHYR\_BASE\ in\ environment\ or\ pass\ in\ -\/z'})}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ sys.exit(1)}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ sys.path.insert(0,\ os.path.join(zephyr\_base,\ \textcolor{stringliteral}{"{}scripts"{}},\ \textcolor{stringliteral}{"{}dts"{}},\ \textcolor{stringliteral}{"{}python-\/devicetree"{}},\ \textcolor{stringliteral}{"{}src"{}}))}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keyword}{import}\ devicetree.edtlib}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ board\ =\ find\_board\_name(args.bootdir)}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ edt\_pickle\ =\ os.path.join(args.bootdir,\ \textcolor{stringliteral}{"{}zephyr"{}},\ \textcolor{stringliteral}{"{}edt.pickle"{}})}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{with}\ open(edt\_pickle,\ \textcolor{stringliteral}{'rb'})\ \textcolor{keyword}{as}\ f:}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ edt\ =\ pickle.load(f)}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(edt,\ devicetree.edtlib.EDT)}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ output\ =\ Assembly(args.output,\ args.bootdir,\ edt)}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ output.add\_image(os.path.join(args.bootdir,\ \textcolor{stringliteral}{'zephyr'},\ \textcolor{stringliteral}{'zephyr.bin'}),\ \textcolor{stringliteral}{'mcuboot'})}
\DoxyCodeLine{00143\ \ \ \ \ output.add\_image(args.primary,\ \textcolor{stringliteral}{"{}image-\/0"{}})}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordflow}{if}\ args.secondary\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ output.add\_image(args.secondary,\ \textcolor{stringliteral}{"{}image-\/1"{}})}
\DoxyCodeLine{00146\ }

\end{DoxyCode}
\Hypertarget{namespaceassemble_aa936a2fe87f1c5617cabc15eb24e39aa}\label{namespaceassemble_aa936a2fe87f1c5617cabc15eb24e39aa} 
\index{assemble@{assemble}!same\_keys@{same\_keys}}
\index{same\_keys@{same\_keys}!assemble@{assemble}}
\doxysubsubsection{\texorpdfstring{same\_keys()}{same\_keys()}}
{\footnotesize\ttfamily same\+\_\+keys (\begin{DoxyParamCaption}\item[{}]{a,  }\item[{}]{b }\end{DoxyParamCaption})}

\begin{DoxyVerb}Determine if the dicts a and b have the same keys in them\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{assemble_8py_source_l00032}{32}} of file \mbox{\hyperlink{assemble_8py_source}{assemble.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00032\ \textcolor{keyword}{def\ }same\_keys(a,\ b):}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Determine\ if\ the\ dicts\ a\ and\ b\ have\ the\ same\ keys\ in\ them"{}"{}"{}}}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordflow}{for}\ ak\ \textcolor{keywordflow}{in}\ a.keys():}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ak\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ b:}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{False}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{for}\ bk\ \textcolor{keywordflow}{in}\ b.keys():}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ bk\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ a:}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{False}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{True}}
\DoxyCodeLine{00041\ }

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\Hypertarget{namespaceassemble_af289670e250b19806a45fb2cb94f233e}\label{namespaceassemble_af289670e250b19806a45fb2cb94f233e} 
\index{assemble@{assemble}!offset\_re@{offset\_re}}
\index{offset\_re@{offset\_re}!assemble@{assemble}}
\doxysubsubsection{\texorpdfstring{offset\_re}{offset\_re}}
{\footnotesize\ttfamily offset\+\_\+re = re.\+compile(r"{}\texorpdfstring{$^\wedge$}{\string^}\#define DT\+\_\+\+FLASH\+\_\+\+AREA\+\_\+(\mbox{[}0-\/9A-\/Z\+\_\+\mbox{]}+)\+\_\+\+OFFSET(\+\_\+0)?\textbackslash{}s+(0x\mbox{[}0-\/9a-\/fA-\/F\mbox{]}+\texorpdfstring{$\vert$}{|}\mbox{[}0-\/9\mbox{]}+)\$"{})}



Definition at line \mbox{\hyperlink{assemble_8py_source_l00042}{42}} of file \mbox{\hyperlink{assemble_8py_source}{assemble.\+py}}.

\Hypertarget{namespaceassemble_a13d7ce74f896baf0c65793c8bb96fd09}\label{namespaceassemble_a13d7ce74f896baf0c65793c8bb96fd09} 
\index{assemble@{assemble}!size\_re@{size\_re}}
\index{size\_re@{size\_re}!assemble@{assemble}}
\doxysubsubsection{\texorpdfstring{size\_re}{size\_re}}
{\footnotesize\ttfamily size\+\_\+re = re.\+compile(r"{}\texorpdfstring{$^\wedge$}{\string^}\#define DT\+\_\+\+FLASH\+\_\+\+AREA\+\_\+(\mbox{[}0-\/9A-\/Z\+\_\+\mbox{]}+)\+\_\+\+SIZE(\+\_\+0)?\textbackslash{}s+(0x\mbox{[}0-\/9a-\/fA-\/F\mbox{]}+\texorpdfstring{$\vert$}{|}\mbox{[}0-\/9\mbox{]}+)\$"{})}



Definition at line \mbox{\hyperlink{assemble_8py_source_l00043}{43}} of file \mbox{\hyperlink{assemble_8py_source}{assemble.\+py}}.

